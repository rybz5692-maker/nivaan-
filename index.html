// filepath: 
// ...existing code...
document.addEventListener('DOMContentLoaded', () => {
  const btn = document.getElementById('wishButton');
  const audio = document.getElementById('birthdayMusic');

  if (!audio) {
    console.error('Audio element #birthdayMusic not found');
    return;
  }

  // Debug listeners
  audio.addEventListener('loadedmetadata', () => console.log('audio: loadedmetadata, duration=', audio.duration));
  audio.addEventListener('canplay', () => console.log('audio: canplay'));
  audio.addEventListener('playing', () => console.log('audio: playing'));
  audio.addEventListener('pause', () => console.log('audio: paused'));
  audio.addEventListener('ended', () => console.log('audio: ended'));
  audio.addEventListener('error', (e) => {
    const err = audio.error;
    console.error('audio: error', err && err.code, err && err.message, e);
  });

  // Attempt play on wish button click and log result
  btn?.addEventListener('click', async (ev) => {
    try {
      await audio.play();
      console.log('audio.play() succeeded');
    } catch (err) {
      console.error('audio.play() failed:', err);
      // optional: show a small message in page
      const t = document.createElement('div');
      t.textContent = 'Music failed to start (browser blocked or file missing)';
      t.style.position = 'fixed';
      t.style.bottom = '12px';
      t.style.left = '12px';
      t.style.padding = '8px 12px';
      t.style.background = 'rgba(0,0,0,0.7)';
      t.style.color = '#fff';
      t.style.borderRadius = '8px';
      document.body.appendChild(t);
      setTimeout(() => t.remove(), 4000);
    }
    // existing click behavior (confetti/toast/etc.) will still run
  });

  // optional: log current audio src
  console.log('audio.src=', audio.currentSrc || audio.src);
});
// ...existing code...
